<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíò The Most Important Quiz of Your Life</title>

<!-- ========== GOOGLE FONTS ========== -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ========================================
   CSS RESET & ROOT VARIABLES
   ======================================== */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --pink: #ff6b9d;
  --rose: #c2185b;
  --deep-rose: #880e4f;
  --peach: #ffab91;
  --lavender: #ce93d8;
  --purple: #7b1fa2;
  --soft-pink: #fce4ec;
  --white: #ffffff;
  --glass-bg: rgba(255, 255, 255, 0.12);
  --glass-border: rgba(255, 255, 255, 0.25);
  --shadow: 0 8px 32px rgba(136, 14, 79, 0.25);
  --text-dark: #3e1929;
  --text-light: #fff0f5;
  --font-display: 'Playfair Display', serif;
  --font-body: 'Inter', sans-serif;
  --font-mono: 'Space Mono', monospace;
}

html { scroll-behavior: smooth; }

body {
  font-family: var(--font-body);
  min-height: 100vh;
  overflow-x: hidden;
  background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 25%, #f48fb1 50%, #ce93d8 75%, #ba68c8 100%);
  background-size: 400% 400%;
  animation: gradientShift 12s ease infinite;
  color: var(--text-dark);
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ========================================
   FLOATING HEARTS BACKGROUND (CLICKABLE!)
   ======================================== */
.hearts-bg {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  z-index: 1;
  overflow: hidden;
}

.floating-heart {
  position: absolute;
  bottom: -80px;
  font-size: 1.5rem;
  opacity: 0.2;
  animation: floatUp linear infinite;
  user-select: none;
  pointer-events: auto;
  cursor: pointer;
  transition: transform 0.2s ease, opacity 0.2s ease;
  z-index: 2;
}

.floating-heart:hover {
  opacity: 0.7 !important;
  transform: scale(1.5) !important;
  filter: drop-shadow(0 0 8px rgba(255, 107, 157, 0.6));
  animation-play-state: paused;
}

/* Larger click target for floating hearts */
.floating-heart::before {
  content: '';
  position: absolute;
  inset: -14px;
  border-radius: 50%;
}

@keyframes floatUp {
  0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0.2; }
  50% { opacity: 0.3; }
  100% { transform: translateY(-110vh) rotate(720deg) scale(0.5); opacity: 0; }
}

/* ========================================
   HEART CLICK MESSAGE POPUP
   ======================================== */
.heart-message {
  position: fixed;
  z-index: 2000;
  background: var(--white);
  border-radius: 20px;
  padding: 0.8rem 1.3rem;
  box-shadow: 0 10px 40px rgba(136, 14, 79, 0.25);
  border: 1.5px solid rgba(255, 107, 157, 0.3);
  pointer-events: none;
  animation: heartMsgPop 2.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  max-width: 260px;
  text-align: center;
}

.heart-message-text {
  font-family: var(--font-display);
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--deep-rose);
  line-height: 1.3;
}

.heart-message-emoji {
  font-size: 1.4rem;
  display: block;
  margin-bottom: 0.3rem;
}

@keyframes heartMsgPop {
  0% { opacity: 0; transform: scale(0.3) translateY(10px); }
  15% { opacity: 1; transform: scale(1.05) translateY(-5px); }
  25% { transform: scale(1) translateY(0); }
  80% { opacity: 1; transform: scale(1) translateY(0); }
  100% { opacity: 0; transform: scale(0.8) translateY(-30px); }
}

/* ========================================
   MAIN CONTAINER (GLASSMORPHISM)
   ======================================== */
.app-container {
  position: relative;
  z-index: 10;
  width: 94%;
  max-width: 560px;
  min-height: 500px;
  padding: 2.5rem 2rem;
  border-radius: 28px;
  background: rgba(255, 255, 255, 0.18);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1.5px solid var(--glass-border);
  box-shadow: var(--shadow), 0 0 80px rgba(206, 147, 216, 0.2);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: transform 0.4s ease, box-shadow 0.4s ease;
}

.app-container:hover {
  box-shadow: var(--shadow), 0 0 120px rgba(206, 147, 216, 0.35);
}

/* ========================================
   MUSIC TOGGLE BUTTON
   ======================================== */
.music-toggle {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  z-index: 500;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: 1.5px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  cursor: pointer;
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(136, 14, 79, 0.15);
}

.music-toggle:hover {
  background: rgba(255, 255, 255, 0.45);
  transform: scale(1.1);
  box-shadow: 0 6px 25px rgba(136, 14, 79, 0.25);
}

.music-toggle.playing {
  animation: musicPulse 1.5s ease infinite;
}

@keyframes musicPulse {
  0%, 100% { box-shadow: 0 4px 20px rgba(136, 14, 79, 0.15); }
  50% { box-shadow: 0 4px 20px rgba(233, 30, 99, 0.4), 0 0 30px rgba(255, 107, 157, 0.2); }
}

/* ========================================
   SCREEN MANAGEMENT
   ======================================== */
.screen {
  display: none;
  width: 100%;
  flex-direction: column;
  align-items: center;
  text-align: center;
  animation: fadeSlideIn 0.5s ease;
}

.screen.active {
  display: flex;
}

@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(30px) scale(0.97); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes fadeSlideOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-30px); }
}

/* ========================================
   LOADING SCREEN
   ======================================== */
#loading-screen {
  gap: 1.5rem;
}

.loading-text {
  font-family: var(--font-mono);
  font-size: 0.95rem;
  color: var(--deep-rose);
  letter-spacing: 0.5px;
}

.loading-bar-container {
  width: 75%;
  height: 6px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 10px;
  overflow: hidden;
}

.loading-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--pink), var(--lavender), var(--pink));
  background-size: 200% 100%;
  border-radius: 10px;
  animation: loadingShimmer 1.5s ease infinite;
  transition: width 0.3s ease;
}

@keyframes loadingShimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.loading-emoji {
  font-size: 3rem;
  animation: pulse 1s ease infinite alternate;
}

@keyframes pulse {
  from { transform: scale(1); }
  to { transform: scale(1.15); }
}

/* ========================================
   LANDING SCREEN
   ======================================== */
#landing-screen { gap: 1.8rem; }

.landing-headline {
  font-family: var(--font-display);
  font-size: 1.65rem;
  font-weight: 700;
  line-height: 1.35;
  color: var(--deep-rose);
  max-width: 440px;
}

.landing-headline .typewriter-cursor {
  display: inline-block;
  width: 3px;
  height: 1.2em;
  background: var(--rose);
  margin-left: 4px;
  animation: blink 0.7s step-end infinite;
  vertical-align: text-bottom;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* ========== PERSONAL IMAGES ========== */
.hero-image-wrapper {
  position: relative;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  overflow: hidden;
  box-shadow: 0 0 40px rgba(255, 107, 157, 0.4), 0 0 80px rgba(206, 147, 216, 0.2);
  animation: floatImage 4s ease-in-out infinite;
  border: 3px solid rgba(255, 255, 255, 0.5);
}

.hero-image-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.hero-image-wrapper:hover img {
  transform: scale(1.08);
}

.hero-image-wrapper::after {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  background: conic-gradient(var(--pink), var(--lavender), var(--peach), var(--pink));
  z-index: -1;
  animation: spinGlow 6s linear infinite;
}

@keyframes floatImage {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-14px); }
}

@keyframes spinGlow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Quiz question image */
.quiz-image-wrapper {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  overflow: hidden;
  border: 2.5px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 0 25px rgba(255, 107, 157, 0.3);
  margin-bottom: 0.2rem;
  animation: floatImage 5s ease-in-out infinite;
  flex-shrink: 0;
}

.quiz-image-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.4s ease;
}

.quiz-image-wrapper:hover img {
  transform: scale(1.1);
}

/* Celebration photo */
.celebration-photo-wrapper {
  width: 160px;
  height: 160px;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid rgba(255, 255, 255, 0.6);
  box-shadow: 0 0 40px rgba(233, 30, 99, 0.35), 0 0 80px rgba(206, 147, 216, 0.2);
  animation: celebPhotoGlow 2s ease infinite alternate;
}

.celebration-photo-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

@keyframes celebPhotoGlow {
  from { box-shadow: 0 0 40px rgba(233, 30, 99, 0.35), 0 0 80px rgba(206, 147, 216, 0.2); }
  to { box-shadow: 0 0 60px rgba(233, 30, 99, 0.5), 0 0 120px rgba(206, 147, 216, 0.35); }
}

/* Image fallback placeholder */
.img-fallback {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #fce4ec, #f8bbd0);
  font-size: 3rem;
}

.quiz-image-wrapper .img-fallback { font-size: 2rem; }

.ai-prediction {
  font-family: var(--font-mono);
  font-size: 0.8rem;
  color: var(--purple);
  background: rgba(206, 147, 216, 0.15);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  border: 1px solid rgba(206, 147, 216, 0.3);
}

/* ========================================
   BUTTONS
   ======================================== */
.btn-primary {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 1rem;
  padding: 1rem 2.2rem;
  border: none;
  border-radius: 60px;
  background: linear-gradient(135deg, var(--pink), var(--rose));
  color: var(--white);
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  box-shadow: 0 6px 25px rgba(194, 24, 91, 0.35);
  letter-spacing: 0.3px;
}

.btn-primary:hover {
  transform: translateY(-3px) scale(1.03);
  box-shadow: 0 10px 35px rgba(194, 24, 91, 0.5);
}

.btn-primary:active {
  transform: translateY(0) scale(0.98);
}

/* Ripple */
.btn-primary .ripple {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.4);
  transform: scale(0);
  animation: rippleEffect 0.6s linear;
  pointer-events: none;
}

@keyframes rippleEffect {
  to { transform: scale(4); opacity: 0; }
}

/* ========================================
   BACK BUTTON
   ======================================== */
.back-btn {
  position: absolute;
  top: 1.2rem;
  left: 1.2rem;
  font-family: var(--font-body);
  font-weight: 500;
  font-size: 0.85rem;
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.35);
  color: var(--deep-rose);
  padding: 0.45rem 1rem;
  border-radius: 30px;
  cursor: pointer;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  z-index: 20;
  display: none;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.35);
  transform: translateX(-3px);
  box-shadow: 0 4px 15px rgba(136, 14, 79, 0.15);
}

.back-btn.visible { display: flex; align-items: center; gap: 0.35rem; }

/* ========================================
   PROGRESS BAR
   ======================================== */
.progress-container {
  width: 100%;
  margin-bottom: 1.5rem;
}

.progress-track {
  width: 100%;
  height: 5px;
  background: rgba(255, 255, 255, 0.25);
  border-radius: 10px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--pink), var(--lavender));
  border-radius: 10px;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.progress-label {
  font-size: 0.72rem;
  font-family: var(--font-mono);
  color: var(--rose);
  margin-top: 0.4rem;
  text-align: right;
  opacity: 0.7;
}

/* ========================================
   QUIZ QUESTIONS
   ======================================== */
.quiz-screen { gap: 1.2rem; }

.question-number {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--purple);
  opacity: 0.7;
}

.question-text {
  font-family: var(--font-display);
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--deep-rose);
  line-height: 1.4;
  max-width: 440px;
}

.options-grid {
  display: flex;
  flex-direction: column;
  gap: 0.7rem;
  width: 100%;
  max-width: 400px;
}

.option-btn {
  font-family: var(--font-body);
  font-weight: 500;
  font-size: 0.92rem;
  padding: 0.9rem 1.3rem;
  border: 1.5px solid rgba(255, 255, 255, 0.35);
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(8px);
  color: var(--text-dark);
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
  position: relative;
  overflow: hidden;
}

.option-btn:hover {
  background: rgba(255, 255, 255, 0.35);
  border-color: var(--pink);
  transform: translateX(6px);
  box-shadow: 0 4px 20px rgba(255, 107, 157, 0.2);
}

.option-btn:active { transform: translateX(3px) scale(0.98); }

.option-btn.selected {
  background: linear-gradient(135deg, rgba(255, 107, 157, 0.25), rgba(206, 147, 216, 0.25));
  border-color: var(--pink);
  box-shadow: 0 4px 20px rgba(255, 107, 157, 0.25);
}

/* Locked options after selection */
.option-btn.locked {
  pointer-events: none;
  opacity: 0.55;
  transform: none;
}

.option-btn.locked:hover {
  transform: none;
  box-shadow: none;
}

.option-btn.selected.locked {
  opacity: 1;
}

/* ========================================
   INLINE MEME REACTION (STAYS ON SCREEN)
   ======================================== */
.inline-reaction {
  width: 100%;
  max-width: 400px;
  margin-top: 0.6rem;
  padding: 1rem 1.2rem;
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(10px);
  border: 1.5px solid rgba(255, 107, 157, 0.25);
  display: flex;
  align-items: center;
  gap: 0.8rem;
  animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
}

.inline-reaction-emoji {
  font-size: 2.2rem;
  flex-shrink: 0;
}

.inline-reaction-content {
  text-align: left;
  flex: 1;
}

.inline-reaction-text {
  font-family: var(--font-display);
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--deep-rose);
  line-height: 1.3;
}

.inline-reaction-sub {
  font-family: var(--font-mono);
  font-size: 0.68rem;
  color: #999;
  margin-top: 0.2rem;
}

/* Close (X) button on the reaction card */
.reaction-close-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  border: 1.5px solid rgba(136, 14, 79, 0.2);
  background: rgba(255, 255, 255, 0.5);
  color: var(--deep-rose);
  font-size: 0.75rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s ease;
  font-weight: 700;
  line-height: 1;
}

.reaction-close-btn:hover {
  background: var(--pink);
  color: var(--white);
  border-color: var(--pink);
  transform: scale(1.15) rotate(90deg);
}

/* "Next Question" button below the reaction */
.next-question-btn {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 0.88rem;
  padding: 0.7rem 1.8rem;
  border: none;
  border-radius: 50px;
  background: linear-gradient(135deg, var(--pink), var(--rose));
  color: var(--white);
  cursor: pointer;
  margin-top: 0.8rem;
  box-shadow: 0 4px 18px rgba(194, 24, 91, 0.3);
  transition: all 0.25s ease;
  animation: fadeSlideIn 0.4s ease 0.15s both;
}

.next-question-btn:hover {
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 6px 25px rgba(194, 24, 91, 0.45);
}

/* ========================================
   MEME REACTION OVERLAY (kept for special effects)
   ======================================== */
.meme-overlay {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(6px);
  animation: fadeIn 0.2s ease;
}

.meme-overlay.active { display: flex; }

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.meme-card {
  background: var(--white);
  border-radius: 24px;
  padding: 2rem 2.5rem;
  text-align: center;
  max-width: 380px;
  width: 90%;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: popIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
}

@keyframes popIn {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.meme-emoji { font-size: 3.5rem; margin-bottom: 0.8rem; }

.meme-text {
  font-family: var(--font-display);
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--deep-rose);
  line-height: 1.4;
}

.meme-subtext {
  font-family: var(--font-mono);
  font-size: 0.75rem;
  color: #999;
  margin-top: 0.5rem;
}

/* Modal close button */
.meme-card .modal-close-btn {
  position: absolute;
  top: 0.8rem;
  right: 0.8rem;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: 1.5px solid rgba(136, 14, 79, 0.2);
  background: rgba(255, 255, 255, 0.7);
  color: var(--deep-rose);
  font-size: 0.8rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s ease;
  font-weight: 700;
  z-index: 10;
}

.meme-card .modal-close-btn:hover {
  background: var(--pink);
  color: var(--white);
  transform: scale(1.15) rotate(90deg);
}

/* Modal "Next Question" button */
.meme-card .modal-next-btn {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 0.92rem;
  padding: 0.75rem 2rem;
  border: none;
  border-radius: 50px;
  background: linear-gradient(135deg, var(--pink), var(--rose));
  color: var(--white);
  cursor: pointer;
  margin-top: 1.2rem;
  box-shadow: 0 4px 18px rgba(194, 24, 91, 0.3);
  transition: all 0.25s ease;
}

.meme-card .modal-next-btn:hover {
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 6px 25px rgba(194, 24, 91, 0.45);
}

/* ========================================
   FINAL QUESTION SCREEN
   ======================================== */
#final-screen { gap: 1.5rem; position: relative; overflow: visible; }

.final-question {
  font-family: var(--font-display);
  font-size: 2rem;
  font-weight: 900;
  color: var(--deep-rose);
  line-height: 1.3;
  text-shadow: 0 2px 10px rgba(136, 14, 79, 0.1);
}

.final-buttons {
  display: flex;
  gap: 1.2rem;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  min-height: 80px;
  position: relative;
  width: 100%;
}

.btn-yes {
  font-family: var(--font-body);
  font-weight: 700;
  font-size: 1.15rem;
  padding: 1rem 2.8rem;
  border: none;
  border-radius: 60px;
  background: linear-gradient(135deg, #e91e63, #c2185b);
  color: var(--white);
  cursor: pointer;
  box-shadow: 0 8px 30px rgba(233, 30, 99, 0.4);
  transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 5;
}

.btn-yes:hover {
  transform: scale(1.08);
  box-shadow: 0 12px 40px rgba(233, 30, 99, 0.55);
}

.btn-no {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 0.9rem;
  padding: 0.8rem 1.8rem;
  border: 2px solid var(--rose);
  border-radius: 60px;
  background: transparent;
  color: var(--rose);
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;
  z-index: 5;
  user-select: none;
}

.no-warning {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: var(--rose);
  min-height: 1.5rem;
  transition: all 0.3s ease;
  padding: 0.3rem 0.8rem;
  border-radius: 12px;
}

.no-warning.visible {
  background: rgba(233, 30, 99, 0.08);
}

.attempt-counter {
  font-family: var(--font-mono);
  font-size: 0.65rem;
  color: var(--purple);
  opacity: 0.5;
}

/* ========================================
   CELEBRATION SCREEN
   ======================================== */
#celebration-screen {
  gap: 1.5rem;
}

.celebration-emoji {
  font-size: 4rem;
  animation: celebBounce 0.6s ease infinite alternate;
}

@keyframes celebBounce {
  from { transform: translateY(0) scale(1); }
  to { transform: translateY(-15px) scale(1.1); }
}

.celebration-title {
  font-family: var(--font-display);
  font-size: 2rem;
  font-weight: 900;
  color: var(--deep-rose);
  line-height: 1.3;
}

.celebration-subtitle {
  font-family: var(--font-body);
  font-size: 1rem;
  color: var(--rose);
  font-weight: 400;
  max-width: 380px;
  line-height: 1.5;
}

.celebration-badge {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  background: linear-gradient(135deg, rgba(255, 107, 157, 0.2), rgba(206, 147, 216, 0.2));
  padding: 0.6rem 1.2rem;
  border-radius: 30px;
  border: 1px solid rgba(255, 107, 157, 0.3);
  color: var(--deep-rose);
}

/* ========================================
   CONFETTI / HEARTS EXPLOSION
   ======================================== */
.confetti-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 999;
  overflow: hidden;
}

.confetti-piece {
  position: absolute;
  top: -20px;
  width: 12px;
  height: 12px;
  opacity: 0;
  animation: confettiFall linear forwards;
}

@keyframes confettiFall {
  0% { opacity: 1; transform: translateY(0) rotate(0deg); }
  100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
}

/* ========================================
   SCREEN SHAKE
   ======================================== */
.shake {
  animation: shakeIt 0.5s ease;
}

@keyframes shakeIt {
  0%, 100% { transform: translateX(0); }
  15% { transform: translateX(-8px) rotate(-1deg); }
  30% { transform: translateX(8px) rotate(1deg); }
  45% { transform: translateX(-6px); }
  60% { transform: translateX(6px); }
  75% { transform: translateX(-3px); }
}

/* ========================================
   SCREEN GLOW EFFECT
   ======================================== */
.glow-effect {
  animation: screenGlow 2s ease infinite;
}

@keyframes screenGlow {
  0%, 100% { box-shadow: var(--shadow), 0 0 60px rgba(233, 30, 99, 0.3); }
  50% { box-shadow: var(--shadow), 0 0 120px rgba(233, 30, 99, 0.5), 0 0 200px rgba(206, 147, 216, 0.3); }
}

/* ========================================
   RESPONSIVE DESIGN
   ======================================== */
@media (max-width: 600px) {
  .app-container {
    padding: 2rem 1.3rem;
    border-radius: 22px;
    min-height: 450px;
    width: 96%;
  }
  .landing-headline { font-size: 1.35rem; }
  .hero-image-wrapper { width: 160px; height: 160px; }
  .quiz-image-wrapper { width: 90px; height: 90px; }
  .question-text { font-size: 1.2rem; }
  .final-question { font-size: 1.6rem; }
  .btn-primary { padding: 0.9rem 1.8rem; font-size: 0.92rem; }
  .celebration-title { font-size: 1.6rem; }
  .celebration-photo-wrapper { width: 120px; height: 120px; }
  .meme-card { padding: 1.5rem; }
  .inline-reaction { padding: 0.8rem 1rem; gap: 0.6rem; }
  .inline-reaction-emoji { font-size: 1.8rem; }
  .music-toggle { width: 42px; height: 42px; font-size: 1.1rem; bottom: 1rem; right: 1rem; }
}

@media (max-width: 380px) {
  .app-container { padding: 1.5rem 1rem; }
  .landing-headline { font-size: 1.15rem; }
  .hero-image-wrapper { width: 130px; height: 130px; }
  .final-question { font-size: 1.35rem; }
}

@media (min-width: 1200px) {
  .app-container { max-width: 620px; padding: 3rem 2.5rem; }
}
</style>
</head>
<body>

<!-- ========== FLOATING HEARTS BACKGROUND (CLICKABLE!) ========== -->
<div class="hearts-bg" id="heartsBg"></div>

<!-- ========== MEME REACTION OVERLAY (for special use) ========== -->
<div class="meme-overlay" id="memeOverlay">
  <div class="meme-card">
    <div class="meme-emoji" id="memeEmoji">üíÄ</div>
    <div class="meme-text" id="memeText">Emotional damage</div>
    <div class="meme-subtext" id="memeSubtext">processing...</div>
  </div>
</div>

<!-- ========== CONFETTI CONTAINER ========== -->
<div class="confetti-container" id="confettiContainer"></div>

<!-- ==========================================================
     üéµ AUDIO / MUSIC FILES
     Place your MP3 files in the SAME folder as this HTML file.
     Then rename them to match these filenames:

     bg-music.mp3          ‚Üí Romantic background music (loops continuously)
     good-sound.mp3        ‚Üí Plays when a good answer is selected (option 1 or 2)
     bad-sound.mp3         ‚Üí Plays when a bad answer is selected (option 3 or 4)
     celebration-music.mp3 ‚Üí Plays on the YES celebration screen

     ========================================================== -->
<audio id="bgMusic" loop preload="auto">
  <source src="bg-music.mp3" type="audio/mpeg">
</audio>
<audio id="goodSound" preload="auto">
  <source src="good-sound.mp3" type="audio/mpeg">
</audio>
<audio id="badSound" preload="auto">
  <source src="bad-sound.mp3" type="audio/mpeg">
</audio>
<audio id="celebrationMusic" preload="auto">
  <source src="celebration-music.mp3" type="audio/mpeg">
</audio>

<!-- ========== MUSIC TOGGLE BUTTON ========== -->
<button class="music-toggle" id="musicToggle" onclick="toggleMusic()" title="Toggle Music">
  üîá
</button>

<!-- ========== MAIN APP ========== -->
<div class="app-container" id="appContainer">

  <!-- BACK BUTTON -->
  <button class="back-btn" id="backBtn" onclick="goBack()">
    <span>‚óÄ</span> <span>Back</span>
  </button>

  <!-- ============================
       LOADING SCREEN
       ============================ -->
  <div class="screen active" id="loading-screen">
    <div class="loading-emoji">üíò</div>
    <div class="loading-text" id="loadingText">Calculating your feelings‚Ä¶</div>
    <div class="loading-bar-container">
      <div class="loading-bar" id="loadingBar"></div>
    </div>
  </div>

  <!-- ============================
       LANDING SCREEN
       ============================ -->
  <div class="screen" id="landing-screen">
    <div class="landing-headline" id="headlineText"></div>

    <!-- ==========================================================
         üñºÔ∏è CUSTOMIZE LANDING IMAGE
         Replace "hero-photo.jpg" with your personal photo filename.
         Place the image in the SAME folder as this HTML file.
         ========================================================== -->
    <div class="hero-image-wrapper" id="heroImageWrapper">
      <img src="hero-photo.jpg" alt="My Photo" id="heroImg"
           onerror="this.parentElement.innerHTML='<div class=\'img-fallback\'>üíñ</div>';">
    </div>

    <div class="ai-prediction">ü§ñ Our algorithm predicts a 97.3% chance you like me.</div>

    <button class="btn-primary" onclick="startQuiz()">
      Start the Most Important Quiz of Your Life ‚ù§Ô∏è
    </button>
  </div>

  <!-- ============================
       QUIZ SCREEN (Questions 1-4)
       ============================ -->
  <div class="screen quiz-screen" id="quiz-screen">
    <div class="progress-container">
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-label" id="progressLabel">1 / 4</div>
    </div>

    <!-- Personal image per question (set in QUESTION_IMAGES config) -->
    <div class="quiz-image-wrapper" id="quizImageWrapper">
      <img src="" alt="" id="quizImg"
           onerror="this.parentElement.innerHTML='<div class=\'img-fallback\'>üíï</div>';">
    </div>

    <div class="question-number" id="questionNumber">QUESTION 01</div>
    <div class="question-text" id="questionText"></div>
    <div class="options-grid" id="optionsGrid"></div>

    <!-- Inline reaction + next button injected here after selection -->
    <div id="reactionArea"></div>
  </div>

  <!-- ============================
       FINAL QUESTION SCREEN
       ============================ -->
  <div class="screen" id="final-screen">
    <div class="progress-container">
      <div class="progress-track">
        <div class="progress-fill" style="width:100%"></div>
      </div>
      <div class="progress-label">Final Question üíò</div>
    </div>

    <!-- ==========================================================
         üñºÔ∏è CUSTOMIZE FINAL QUESTION IMAGE
         Replace "final-photo.jpg" with your personal photo filename.
         ========================================================== -->
    <div class="quiz-image-wrapper" style="width:140px;height:140px;">
      <img src="final-photo.jpg" alt="Us"
           onerror="this.parentElement.innerHTML='<div class=\'img-fallback\'>üíò</div>';">
    </div>

    <div class="final-question">Will you be my Valentine? üíò</div>
    <div class="final-buttons" id="finalButtons">
      <button class="btn-yes" id="btnYes" onclick="sayYes()">YES! üíñ</button>
      <button class="btn-no" id="btnNo">No üòÖ</button>
    </div>
    <div class="no-warning" id="noWarning"></div>
    <div class="attempt-counter" id="attemptCounter"></div>
  </div>

  <!-- ============================
       CELEBRATION SCREEN
       ============================ -->
  <div class="screen" id="celebration-screen">
    <div class="celebration-emoji">ü•∞</div>

    <!-- ==========================================================
         üñºÔ∏è CUSTOMIZE CELEBRATION IMAGE
         Replace "celebration-photo.jpg" with a couple or personal photo.
         ========================================================== -->
    <div class="celebration-photo-wrapper">
      <img src="celebration-photo.jpg" alt="Us Together"
           onerror="this.parentElement.innerHTML='<div class=\'img-fallback\' style=\'font-size:3.5rem\'>üíë</div>';">
    </div>

    <div class="celebration-title">Best decision you've made today üòå‚ù§Ô∏è</div>
    <div class="celebration-subtitle">
      I knew you'd come around. Our love story just got its main character arc.
      <br><br>Happy Valentine's Day! üíò
    </div>
    <div class="celebration-badge">‚úÖ Achievement Unlocked: Made Someone's Entire Year</div>
  </div>

</div>

<script>
/* ========================================
   CONFIGURATION
   ======================================== */

/* ==========================================================
   üñºÔ∏è PERSONAL IMAGES PER QUESTION
   Replace the filenames below with your own photos.
   Place all images in the SAME folder as this HTML file.

   Naming suggestion:
     photo-1.jpg, photo-2.jpg, photo-3.jpg, photo-4.jpg

   Other images to add (referenced in the HTML above):
     hero-photo.jpg        ‚Üí Landing screen main photo
     final-photo.jpg       ‚Üí Final "Valentine?" question photo
     celebration-photo.jpg ‚Üí Celebration screen photo
   ========================================================== */
const QUESTION_IMAGES = [
  "photo-1.jpg",   // Image for Question 1
  "photo-2.jpg",   // Image for Question 2
  "photo-3.jpg",   // Image for Question 3
  "photo-4.jpg"    // Image for Question 4
];

/* ========== CHANGE QUESTIONS ==========
   Edit the questions, options, and meme reactions below.
   Each question has: text, options array, and reactions for each option.
   Options at index 0-1 = "good" answers, index 2-3 = "bad" answers.
   Bad answers trigger screen shake + bad-sound.mp3.
   Good answers trigger good-sound.mp3.
*/
const QUESTIONS = [
  {
    text: "How attractive do you think I am? üëÄ",
    options: [
      "Respectfully‚Ä¶ 11/10 ü´£",
      "You're decent I guess üòè",
      "I plead the fifth ü§ê",
      "My lawyer advised me not to answer"
    ],
    reactions: [
      { emoji: "üòå", text: "Main character energy detected", sub: "confidence level: maximum" },
      { emoji: "üòí", text: "\"Decent\"?? Emotional damage üíÄ", sub: "this is not very valentine of you" },
      { emoji: "ü§®", text: "Suspicious behavior detected", sub: "FBI has entered the chat üëÄ" },
      { emoji: "‚öñÔ∏è", text: "Your lawyer can't save you here", sub: "objection overruled. answer the question." }
    ]
  },
  {
    text: "Would you share your fries with me? üçü",
    options: [
      "Obviously, you can have all of them",
      "We can split‚Ä¶ maybe 70/30 (my way)",
      "I don't share food. Ever.",
      "I'd order you your own fries ü•π"
    ],
    reactions: [
      { emoji: "ü•π", text: "This is true love", sub: "nobody gives up fries for just anyone" },
      { emoji: "üìä", text: "Task failed successfully", sub: "the math isn't mathing but okay" },
      { emoji: "üíÄ", text: "Achievement unlocked: Broke my heart", sub: "over FRIES?? in THIS economy??" },
      { emoji: "üëë", text: "Big spender energy detected", sub: "relationship material confirmed ‚úÖ" }
    ]
  },
  {
    text: "Am I your favorite notification? üì±",
    options: [
      "You ARE my notification üîî",
      "Top 3 for sure",
      "Depends on who else texted me üò¨",
      "I have notifications on mute üíÄ"
    ],
    reactions: [
      { emoji: "ü•∞", text: "Correct answer. You passed the vibe check.", sub: "welcome to the VIP list" },
      { emoji: "ü§î", text: "Top 3? Who are the other two? üîç", sub: "investigation pending..." },
      { emoji: "üö®", text: "Wrong answer detected üö®", sub: "you had ONE job" },
      { emoji: "‚ò†Ô∏è", text: "This is hurting my virtual feelings", sub: "system shutting down from emotional damage" }
    ]
  },
  {
    text: "Rate my humor honestly. Like, RIGHT NOW. üò§",
    options: [
      "Funnier than memes tbh",
      "You make me exhale through my nose",
      "Humor is‚Ä¶ subjective ü´†",
      "I laugh at you, not with you üíÄ"
    ],
    reactions: [
      { emoji: "üèÜ", text: "Finally someone with taste", sub: "comedic genius recognized" },
      { emoji: "üò§", text: "A nose exhale?? That's the BEST you got?", sub: "i demand a full LOL minimum" },
      { emoji: "üßê", text: "Diplomatically destroying me. Cool.", sub: "this is not very valentine of you" },
      { emoji: "üíî", text: "You had ONE job and you chose violence", sub: "emotional support needed ASAP" }
    ]
  }
];

/* ========== EDIT MEMES ==========
   No-button warning messages ‚Äî these cycle randomly.
*/
const NO_MESSAGES = [
  "Are you sure??? ü•∫",
  "Wrong answer detected üö®",
  "System error. Please click YES.",
  "Illegal move. üö´",
  "Try again sweetheart üôÇ",
  "404: Good decision not found",
  "Plot twist ‚Äî click YES",
  "You misclicked. I forgive you. üíÖ",
  "This is not very Valentine of you üò§",
  "FBI is watching this choice üëÄ",
  "Your WiFi will be revoked.",
  "This is hurting my virtual feelings.",
  "I'm not mad, I'm just disappointed.",
  "Recalculating your life choices‚Ä¶",
  "Even Siri would've said YES by now.",
  "Bro really thought NO was an option üíÄ"
];

/* ========== FLOATING HEART CLICK MESSAGES ==========
   These appear when you click any floating heart in the background!
   Add/edit/remove messages as you like.
*/
const HEART_MESSAGES = [
  { emoji: "üíå", text: "You found a love letter!" },
  { emoji: "üåπ", text: "A rose for you, beautiful" },
  { emoji: "‚ú®", text: "You're magical, you know that?" },
  { emoji: "üíï", text: "My heart beats for you" },
  { emoji: "ü¶ã", text: "You give me butterflies" },
  { emoji: "üåô", text: "You light up my darkest nights" },
  { emoji: "‚òÄÔ∏è", text: "You're my sunshine on a cloudy day" },
  { emoji: "üéµ", text: "You're my favorite song on repeat" },
  { emoji: "üç´", text: "Sweeter than chocolate" },
  { emoji: "üî•", text: "You make my heart go brrr" },
  { emoji: "ü•∫", text: "I can't stop thinking about you" },
  { emoji: "üí´", text: "Wish upon a star ‚Äî it's you" },
  { emoji: "üß∏", text: "I want to be your teddy bear" },
  { emoji: "üè†", text: "You feel like home" },
  { emoji: "üíò", text: "Cupid approves this message" },
  { emoji: "ü§≠", text: "Caught you clicking hearts üëÄ" },
  { emoji: "üòè", text: "Someone's feeling romantic‚Ä¶" },
  { emoji: "ü´∂", text: "This heart was meant for you" },
  { emoji: "üíê", text: "Here's a bouquet, just because" },
  { emoji: "ü™Ñ", text: "Every heart has a secret message" }
];

/* ========================================
   STATE
   ======================================== */
let currentQuestion = 0;
let answers = [];
let noAttempts = 0;
let yesScale = 1;
let musicPlaying = false;
let questionAnswered = false;

/* ========================================
   FLOATING HEARTS GENERATOR (CLICKABLE!)
   ======================================== */
function createFloatingHearts() {
  const container = document.getElementById('heartsBg');
  const hearts = ['üíï', 'üíó', 'üíñ', 'üíò', '‚ô•', '‚ù§Ô∏è', 'ü©∑', 'ü§ç', 'üíú'];

  for (let i = 0; i < 25; i++) {
    const heart = document.createElement('span');
    heart.className = 'floating-heart';
    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    heart.style.left = Math.random() * 100 + '%';
    heart.style.fontSize = (Math.random() * 1.5 + 0.8) + 'rem';
    heart.style.animationDuration = (Math.random() * 8 + 8) + 's';
    heart.style.animationDelay = (Math.random() * 10) + 's';

    // Click to reveal hidden romantic message!
    heart.addEventListener('click', function(e) {
      e.stopPropagation();
      showHeartMessage(e.clientX, e.clientY);
      // Visual pop on click
      this.style.transform = 'scale(2)';
      this.style.opacity = '0.8';
      setTimeout(() => { this.style.transform = ''; this.style.opacity = ''; }, 400);
    });

    container.appendChild(heart);
  }

  // Continuously spawn new hearts to replace faded ones
  setInterval(() => {
    if (container.children.length < 30) {
      const heart = document.createElement('span');
      heart.className = 'floating-heart';
      heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
      heart.style.left = Math.random() * 100 + '%';
      heart.style.fontSize = (Math.random() * 1.5 + 0.8) + 'rem';
      heart.style.animationDuration = (Math.random() * 8 + 8) + 's';
      heart.style.animationDelay = '0s';

      heart.addEventListener('click', function(e) {
        e.stopPropagation();
        showHeartMessage(e.clientX, e.clientY);
        this.style.transform = 'scale(2)';
        this.style.opacity = '0.8';
        setTimeout(() => { this.style.transform = ''; this.style.opacity = ''; }, 400);
      });

      container.appendChild(heart);
      const dur = parseFloat(heart.style.animationDuration) * 1000;
      setTimeout(() => heart.remove(), dur);
    }
  }, 3000);
}

/* ========================================
   HEART CLICK MESSAGE POPUP
   ======================================== */
function showHeartMessage(x, y) {
  const msg = HEART_MESSAGES[Math.floor(Math.random() * HEART_MESSAGES.length)];

  const popup = document.createElement('div');
  popup.className = 'heart-message';

  // Position near click, clamped to viewport
  const left = Math.min(Math.max(x - 100, 10), window.innerWidth - 270);
  const top = Math.min(Math.max(y - 70, 10), window.innerHeight - 100);
  popup.style.left = left + 'px';
  popup.style.top = top + 'px';

  popup.innerHTML = `
    <span class="heart-message-emoji">${msg.emoji}</span>
    <div class="heart-message-text">${msg.text}</div>
  `;

  document.body.appendChild(popup);
  setTimeout(() => popup.remove(), 2200);
}

/* ========================================
   üéµ MUSIC / SOUND SYSTEM
   ======================================== */
function toggleMusic() {
  const bgMusic = document.getElementById('bgMusic');
  const btn = document.getElementById('musicToggle');

  if (musicPlaying) {
    bgMusic.pause();
    btn.textContent = 'üîá';
    btn.classList.remove('playing');
    musicPlaying = false;
  } else {
    bgMusic.volume = 0.3;
    bgMusic.play().catch(() => {});
    btn.textContent = 'üîä';
    btn.classList.add('playing');
    musicPlaying = true;
  }
}

function startBgMusic() {
  const bgMusic = document.getElementById('bgMusic');
  bgMusic.volume = 0.3;
  bgMusic.play().then(() => {
    musicPlaying = true;
    document.getElementById('musicToggle').textContent = 'üîä';
    document.getElementById('musicToggle').classList.add('playing');
  }).catch(() => {
    // Autoplay blocked ‚Äî user must click music toggle manually
    musicPlaying = false;
  });
}

function playGoodSound() {
  const sound = document.getElementById('goodSound');
  sound.currentTime = 0;
  sound.volume = 0.5;
  sound.play().catch(() => {});
}

function playBadSound() {
  const sound = document.getElementById('badSound');
  sound.currentTime = 0;
  sound.volume = 0.5;
  sound.play().catch(() => {});
}

function playCelebrationMusic() {
  const bgMusic = document.getElementById('bgMusic');
  const celebMusic = document.getElementById('celebrationMusic');

  // Fade out background music
  let vol = bgMusic.volume;
  const fadeOut = setInterval(() => {
    vol -= 0.03;
    if (vol <= 0) {
      bgMusic.pause();
      bgMusic.volume = 0.3;
      clearInterval(fadeOut);
    } else {
      bgMusic.volume = vol;
    }
  }, 50);

  // Play celebration music
  celebMusic.currentTime = 0;
  celebMusic.volume = 0.6;
  celebMusic.play().catch(() => {});
}

/* ========================================
   LOADING SCREEN
   ======================================== */
function runLoadingScreen() {
  const bar = document.getElementById('loadingBar');
  const text = document.getElementById('loadingText');
  const loadingMessages = [
    "Calculating your feelings‚Ä¶",
    "Scanning for compatibility‚Ä¶",
    "Loading romantic algorithms‚Ä¶",
    "Preparing emotional damage‚Ä¶",
    "Almost there‚Ä¶ probably‚Ä¶ üíÄ"
  ];
  let progress = 0;
  let msgIndex = 0;

  const interval = setInterval(() => {
    progress += Math.random() * 18 + 5;
    if (progress > 100) progress = 100;
    bar.style.width = progress + '%';

    if (progress > (msgIndex + 1) * 20 && msgIndex < loadingMessages.length - 1) {
      msgIndex++;
      text.textContent = loadingMessages[msgIndex];
    }

    if (progress >= 100) {
      clearInterval(interval);
      setTimeout(() => {
        switchScreen('loading-screen', 'landing-screen');
        typewriterEffect();
      }, 400);
    }
  }, 300);
}

/* ========================================
   TYPEWRITER EFFECT
   ======================================== */
function typewriterEffect() {
  const el = document.getElementById('headlineText');
  const fullText = "Wait‚Ä¶ before you scroll ‚Äî I need 30 seconds of your life.";
  el.innerHTML = '<span class="typewriter-cursor"></span>';
  let i = 0;

  const type = () => {
    if (i < fullText.length) {
      el.innerHTML = fullText.substring(0, i + 1) + '<span class="typewriter-cursor"></span>';
      i++;
      setTimeout(type, 35 + Math.random() * 25);
    } else {
      setTimeout(() => {
        const cursor = el.querySelector('.typewriter-cursor');
        if (cursor) cursor.style.animation = 'blink 0.7s step-end infinite';
      }, 300);
    }
  };
  type();
}

/* ========================================
   SCREEN SWITCHING
   ======================================== */
function switchScreen(fromId, toId) {
  const from = document.getElementById(fromId);
  const to = document.getElementById(toId);
  from.style.animation = 'fadeSlideOut 0.3s ease forwards';
  setTimeout(() => {
    from.classList.remove('active');
    from.style.animation = '';
    to.classList.add('active');
    to.style.animation = 'fadeSlideIn 0.5s ease';
    updateBackButton(toId);
  }, 280);
}

function updateBackButton(screenId) {
  const backBtn = document.getElementById('backBtn');
  if (screenId === 'quiz-screen' || screenId === 'final-screen') {
    backBtn.classList.add('visible');
  } else {
    backBtn.classList.remove('visible');
  }
}

/* ========================================
   BACK BUTTON LOGIC
   ======================================== */
function goBack() {
  if (document.getElementById('final-screen').classList.contains('active')) {
    currentQuestion = QUESTIONS.length - 1;
    // Reset the question when going back
    delete answers[currentQuestion];
    questionAnswered = false;
    switchScreen('final-screen', 'quiz-screen');
    renderQuestion();
  } else if (document.getElementById('quiz-screen').classList.contains('active')) {
    if (currentQuestion > 0) {
      currentQuestion--;
      // Reset the question when going back
      delete answers[currentQuestion];
      questionAnswered = false;
      renderQuestion();
      document.getElementById('quiz-screen').style.animation = 'fadeSlideIn 0.4s ease';
    } else {
      switchScreen('quiz-screen', 'landing-screen');
    }
  }
}

/* ========================================
   QUIZ LOGIC
   ======================================== */
function startQuiz() {
  currentQuestion = 0;
  questionAnswered = false;
  switchScreen('landing-screen', 'quiz-screen');
  renderQuestion();
  // Start background music on first user interaction
  startBgMusic();
}

function renderQuestion() {
  const q = QUESTIONS[currentQuestion];
  const total = QUESTIONS.length;
  questionAnswered = (answers[currentQuestion] !== undefined);

  // Update progress
  document.getElementById('progressFill').style.width = ((currentQuestion + 1) / (total + 1) * 100) + '%';
  document.getElementById('progressLabel').textContent = `${currentQuestion + 1} / ${total}`;
  document.getElementById('questionNumber').textContent = `QUESTION 0${currentQuestion + 1}`;
  document.getElementById('questionText').textContent = q.text;

  // Set question-specific personal image
  const quizImgWrapper = document.getElementById('quizImageWrapper');
  const imgSrc = QUESTION_IMAGES[currentQuestion] || '';
  quizImgWrapper.innerHTML = `<img src="${imgSrc}" alt="Photo" onerror="this.parentElement.innerHTML='<div class=\\'img-fallback\\'>üíï</div>';">`;

  // Render options
  const grid = document.getElementById('optionsGrid');
  grid.innerHTML = '';

  q.options.forEach((opt, idx) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.textContent = opt;

    // Restore previous selection state
    if (questionAnswered) {
      if (answers[currentQuestion] === idx) {
        btn.classList.add('selected', 'locked');
      } else {
        btn.classList.add('locked');
      }
    }

    btn.addEventListener('click', () => {
      if (!questionAnswered) selectOption(idx);
    });
    grid.appendChild(btn);
  });

  // Clear reaction area
  const reactionArea = document.getElementById('reactionArea');
  reactionArea.innerHTML = '';

  // If previously answered, show a "Next Question" button (no modal re-popup)
  if (questionAnswered) {
    const isLastQuestion = (currentQuestion >= QUESTIONS.length - 1);
    const nextLabel = isLastQuestion ? 'Final Question ‚Üí' : 'Next Question ‚Üí';
    reactionArea.innerHTML = `<button class="next-question-btn" onclick="advanceQuestion()">${nextLabel}</button>`;
  }
}

function selectOption(idx) {
  if (questionAnswered) return;
  questionAnswered = true;
  answers[currentQuestion] = idx;

  // Highlight selected + lock all options
  document.querySelectorAll('.option-btn').forEach((btn, i) => {
    if (i === idx) {
      btn.classList.add('selected', 'locked');
    } else {
      btn.classList.add('locked');
    }
  });

  // üéµ Play sound based on answer quality
  const isBadAnswer = (idx === 2 || idx === 3);
  if (isBadAnswer) {
    playBadSound();
    document.getElementById('appContainer').classList.add('shake');
    setTimeout(() => document.getElementById('appContainer').classList.remove('shake'), 500);
  } else {
    playGoodSound();
  }

  // Show reaction as MODAL popup
  const reaction = QUESTIONS[currentQuestion].reactions[idx];
  showReactionModal(reaction);
}

/* ========================================
   REACTION MODAL (POPUP WITH CLOSE & NEXT)
   ======================================== */
function showReactionModal(reaction) {
  const overlay = document.getElementById('memeOverlay');
  const card = overlay.querySelector('.meme-card');

  document.getElementById('memeEmoji').textContent = reaction.emoji;
  document.getElementById('memeText').textContent = reaction.text;
  document.getElementById('memeSubtext').textContent = reaction.sub;

  // Remove old dynamic buttons if any
  card.querySelectorAll('.modal-close-btn, .modal-next-btn').forEach(el => el.remove());

  // Add close button (resets selection so they can pick again)
  const closeBtn = document.createElement('button');
  closeBtn.className = 'modal-close-btn';
  closeBtn.textContent = '‚úï';
  closeBtn.title = 'Close & Pick Again';
  closeBtn.onclick = closeReactionModal;
  card.appendChild(closeBtn);

  // Add "Next Question" button inside modal
  const isLastQuestion = (currentQuestion >= QUESTIONS.length - 1);
  const nextLabel = isLastQuestion ? 'Final Question ‚Üí' : 'Next Question ‚Üí';
  const nextBtn = document.createElement('button');
  nextBtn.className = 'modal-next-btn';
  nextBtn.textContent = nextLabel;
  nextBtn.onclick = function() {
    overlay.classList.remove('active');
    advanceQuestion();
  };
  card.appendChild(nextBtn);

  overlay.classList.add('active');
}

function closeReactionModal() {
  const overlay = document.getElementById('memeOverlay');
  overlay.classList.remove('active');

  // Reset selection so they can pick again
  delete answers[currentQuestion];
  questionAnswered = false;

  // Unlock and unselect all options
  document.querySelectorAll('.option-btn').forEach(btn => {
    btn.classList.remove('selected', 'locked');
  });
}

function advanceQuestion() {
  currentQuestion++;
  questionAnswered = false;

  if (currentQuestion < QUESTIONS.length) {
    renderQuestion();
    document.getElementById('quiz-screen').style.animation = 'fadeSlideIn 0.4s ease';
  } else {
    switchScreen('quiz-screen', 'final-screen');
    setupNoButton();
  }
}

/* ========================================
   MEME OVERLAY (kept for special use)
   ======================================== */
function showMeme(emoji, text, subtext, callback) {
  const overlay = document.getElementById('memeOverlay');
  document.getElementById('memeEmoji').textContent = emoji;
  document.getElementById('memeText').textContent = text;
  document.getElementById('memeSubtext').textContent = subtext;
  overlay.classList.add('active');

  setTimeout(() => {
    overlay.classList.remove('active');
    if (callback) callback();
  }, 1400);
}

/* ========================================
   FINAL QUESTION ‚Äî NO BUTTON DODGE
   ======================================== */
function setupNoButton() {
  const btnNo = document.getElementById('btnNo');
  noAttempts = 0;
  yesScale = 1;
  document.getElementById('noWarning').textContent = '';
  document.getElementById('attemptCounter').textContent = '';

  // Reset YES button
  const btnYes = document.getElementById('btnYes');
  btnYes.style.transform = '';
  btnYes.style.fontSize = '';
  btnYes.style.padding = '';

  // Reset NO button
  btnNo.style.position = '';
  btnNo.style.left = '';
  btnNo.style.top = '';
  btnNo.style.transform = '';
  btnNo.textContent = 'No üòÖ';
  btnNo.style.borderColor = '';
  btnNo.style.color = '';

  // Dodge events
  btnNo.addEventListener('mouseenter', dodgeNo);
  btnNo.addEventListener('touchstart', dodgeNo, { passive: true });
  btnNo.addEventListener('click', dodgeNo);
}

function dodgeNo(e) {
  e.preventDefault();
  noAttempts++;

  // üéµ Play bad sound on every NO attempt
  playBadSound();

  const btnNo = document.getElementById('btnNo');
  const btnYes = document.getElementById('btnYes');
  const container = document.getElementById('appContainer');
  const containerRect = container.getBoundingClientRect();

  // Random position within container
  const maxX = containerRect.width - btnNo.offsetWidth - 20;
  const maxY = containerRect.height - btnNo.offsetHeight - 20;
  const randX = Math.random() * maxX;
  const randY = Math.random() * maxY;

  btnNo.style.position = 'absolute';
  btnNo.style.left = randX + 'px';
  btnNo.style.top = randY + 'px';
  btnNo.style.transform = `rotate(${Math.random() * 40 - 20}deg) scale(${Math.max(0.6, 1 - noAttempts * 0.05)})`;
  btnNo.style.transition = 'all 0.15s ease';

  // Random color
  const colors = ['#e91e63', '#9c27b0', '#ff5722', '#f44336', '#e040fb', '#ff4081'];
  btnNo.style.borderColor = colors[Math.floor(Math.random() * colors.length)];
  btnNo.style.color = colors[Math.floor(Math.random() * colors.length)];

  // Change text
  btnNo.textContent = NO_MESSAGES[Math.floor(Math.random() * NO_MESSAGES.length)];

  // Warning message
  const warning = document.getElementById('noWarning');
  warning.classList.add('visible');
  if (noAttempts <= 3) {
    warning.textContent = NO_MESSAGES[Math.floor(Math.random() * NO_MESSAGES.length)];
  } else if (noAttempts <= 7) {
    warning.textContent = "‚ö†Ô∏è This is hurting my virtual feelings.";
  } else {
    warning.textContent = "üíÄ Okay at this point you're just being mean.";
  }

  document.getElementById('attemptCounter').textContent = `Failed attempts: ${noAttempts}`;

  // Grow YES button (no cap ‚Äî grows indefinitely!)
  yesScale += 0.06;
  btnYes.style.transform = `scale(${yesScale})`;
  if (noAttempts > 5) {
    btnYes.style.fontSize = `${1.15 + noAttempts * 0.06}rem`;
    btnYes.style.padding = `${1 + noAttempts * 0.05}rem ${2.8 + noAttempts * 0.15}rem`;
  }

  // Shake
  container.classList.add('shake');
  setTimeout(() => container.classList.remove('shake'), 500);
}

/* ========================================
   YES ‚Äî CELEBRATION
   ======================================== */
function sayYes() {
  switchScreen('final-screen', 'celebration-screen');
  document.getElementById('appContainer').classList.add('glow-effect');
  launchConfetti();

  // üéµ Celebration music (fades out bg music)
  playCelebrationMusic();

  // Zoom effect
  document.getElementById('appContainer').style.transition = 'transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
  document.getElementById('appContainer').style.transform = 'scale(1.03)';
  setTimeout(() => {
    document.getElementById('appContainer').style.transform = 'scale(1)';
  }, 1500);
}

/* ========================================
   CONFETTI / HEARTS EXPLOSION
   ======================================== */
function launchConfetti() {
  const container = document.getElementById('confettiContainer');
  container.innerHTML = '';
  const emojis = ['üíï', 'üíñ', 'üíó', '‚ù§Ô∏è', 'ü©∑', 'üíò', 'üéâ', '‚ú®', 'üåπ', 'ü•∞', 'üíú', 'ü§ç'];
  const colors = ['#e91e63', '#ff4081', '#ce93d8', '#f48fb1', '#ff6090', '#ba68c8', '#ffab91'];

  for (let i = 0; i < 80; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + '%';
    piece.style.animationDuration = (Math.random() * 2 + 1.5) + 's';
    piece.style.animationDelay = (Math.random() * 1.5) + 's';

    if (Math.random() > 0.5) {
      piece.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      piece.style.fontSize = (Math.random() * 1.2 + 0.8) + 'rem';
    } else {
      piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
      piece.style.width = (Math.random() * 10 + 5) + 'px';
      piece.style.height = (Math.random() * 10 + 5) + 'px';
    }
    container.appendChild(piece);
  }

  // Second wave
  setTimeout(() => {
    for (let i = 0; i < 40; i++) {
      const piece = document.createElement('div');
      piece.className = 'confetti-piece';
      piece.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      piece.style.left = Math.random() * 100 + '%';
      piece.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
      piece.style.animationDuration = (Math.random() * 2.5 + 2) + 's';
      piece.style.animationDelay = '0s';
      container.appendChild(piece);
    }
  }, 1000);
}

/* ========================================
   RIPPLE EFFECT ON BUTTONS
   ======================================== */
document.addEventListener('click', function(e) {
  const btn = e.target.closest('.btn-primary, .btn-yes');
  if (!btn) return;
  const ripple = document.createElement('span');
  ripple.className = 'ripple';
  const rect = btn.getBoundingClientRect();
  const size = Math.max(rect.width, rect.height);
  ripple.style.width = ripple.style.height = size + 'px';
  ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
  ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
  btn.appendChild(ripple);
  setTimeout(() => ripple.remove(), 600);
});

/* ========================================
   INIT
   ======================================== */
window.addEventListener('DOMContentLoaded', () => {
  createFloatingHearts();
  runLoadingScreen();
});
</script>
</body>
</html>
